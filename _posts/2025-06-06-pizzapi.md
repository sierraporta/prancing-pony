# Calculando œÄ con Pizza: Ciencia de Datos, Im√°genes y Monte Carlo en Acci√≥n

¬øQui√©n dijo que la matem√°tica no se come? En esta entrada vamos a usar nada m√°s y nada menos que una imagen de pizza para calcular uno de los n√∫meros m√°s 
importantes de la historia: œÄ (pi). Pero no lo haremos con compases ni con c√≠rculos dibujados a mano. Lo haremos como buenos cient√≠ficos de datos: con im√°genes, 
simulaciones y Python.

Bienvenido a este delicioso cruce entre gastronom√≠a visual, matem√°ticas fundamentales y ciencia de datos aplicada.

## üß† Motivaci√≥n: cuando los p√≠xeles cuentan historias

En ciencia de datos, una de las cosas m√°s emocionantes es c√≥mo los datos nos permiten construir conocimiento desde lo inesperado. 
Las im√°genes, por ejemplo, no son m√°s que matrices de n√∫meros. Si sabemos leer esos n√∫meros con los algoritmos correctos, entonces podemos hacer cosas que 
antes parecer√≠an absurdas‚Ä¶ como usar una foto de una pizza para estimar œÄ.

Pero ¬øc√≥mo funciona esto?

La idea proviene del cl√°sico m√©todo de **Monte Carlo**, que estima valores num√©ricos mediante simulaciones aleatorias. En este caso, queremos estimar $\pi$, 
que est√° relacionado con el √°rea de un c√≠rculo. Si lanzamos puntos al azar dentro de un cuadrado que contiene un c√≠rculo, la proporci√≥n de puntos que caen 
dentro del c√≠rculo se aproxima a $\pi/4$, o sea:

\begin{equation}
\pi=4\frac{\mbox{N√∫mero de puntos dentro del c√≠rculo}}{\mbox{N√∫mero de puntos totales}}.
\end{equation}

Y como la pizza es‚Ä¶ m√°s o menos un c√≠rculo‚Ä¶ ¬°ya sabes hacia d√≥nde vamos!

## üîç En qu√© consiste el experimento

- Tomamos una imagen real de una pizza sobre fondo oscuro (buen contraste).
- La procesamos para distinguir claramente la zona de la pizza (c√≠rculo) del fondo (cuadrado).
- Generamos miles de puntos aleatorios sobre la imagen.
- Contamos cu√°ntos caen sobre la pizza (c√≠rculo).
- Calculamos œÄ a partir de la proporci√≥n.

Este m√©todo es divertido, visual, y usa elementos reales del mundo digital (im√°genes) para resolver problemas matem√°ticos cl√°sicos. Una fusi√≥n perfecta de ciencia de datos con matem√°tica aplicada.

## üíª El C√≥digo Paso a Paso

### 1. Cargar y procesar la imagen
Usamos OpenCV para leer y convertir la imagen de la pizza a escala de grises, luego aplicamos un desenfoque para suavizar y una binarizaci√≥n para separar la pizza del fondo.

![pizza]({{ site.baseurl }}/Figures/pizzapi.jpg)

Para hacer esto he preparado un peque√±o c√≥digo para hacer todo. Se ve como sigue.

<div class="custom-code-wrapper" style="box-shadow:0px 0px 0px 0px rgba(0,0,0,0); background-color: rgb(200,200,200); padding:2px; border-radius:0px;">
    
```python
import numpy as np
import cv2 ## Librer√≠a para el tratamiento de im√°genes
img_gray = cv2.imread(image_path, cv2.IMREAD_GRAYSCALE)
img_blur = cv2.GaussianBlur(img_gray, (7, 7), 0)
_, binary = cv2.threshold(img_blur, 100, 255, cv2.THRESH_BINARY)
```
</div>

Esto convierte la imagen en una matriz donde los p√≠xeles del fondo son negros (0) y los de la pizza son blancos (255).

### 2. Simulaci√≥n Monte Carlo
Generamos miles de coordenadas aleatorias dentro de la imagen, y contamos cu√°ntas de ellas caen sobre p√≠xeles blancos (la pizza).

<div class="custom-code-wrapper" style="box-shadow:0px 0px 0px 0px rgba(0,0,0,0); background-color: rgb(200,200,200); padding:2px; border-radius:0px;">
    
```python
x_rand = np.random.randint(0, w, size=num_points)
y_rand = np.random.randint(0, h, size=num_points)
inside = binary[y_rand, x_rand] == 255
pi_est = 4 * np.sum(inside) / num_points
```
</div>

Multiplicamos la proporci√≥n de puntos dentro de la pizza por 4, y ¬°voil√†!, tenemos una estimaci√≥n de œÄ.

### 3. Visualizaci√≥n
La ciencia de datos es tambi√©n visual. Representamos gr√°ficamente los puntos para ver qu√© tan bien se comporta la simulaci√≥n:

```python
plt.scatter(x_rand[inside], y_rand[inside], s=0.2, c='red')
plt.scatter(x_rand[~inside], y_rand[~inside], s=0.2, c='blue')
Puntos rojos: dentro del c√≠rculo.
Puntos azules: fuera del c√≠rculo.
Una pizza matem√°tica servida en c√≥digo.
```
</div>

## üìà Resultados y Reflexiones

Con esta imagen, obtuvimos una estimaci√≥n de œÄ muy cercana a su valor real (3.14159‚Ä¶), dependiendo del n√∫mero de puntos simulados. No se trata de la forma m√°s precisa de calcular œÄ, pero s√≠ de una forma extremadamente did√°ctica y divertida.

Este ejercicio tiene un enorme valor pedag√≥gico:

Introduce ideas fundamentales de probabilidad, simulaci√≥n y estad√≠stica.
Muestra c√≥mo trabajar con im√°genes en ciencia de datos.
Estimula la creatividad para pensar en problemas cl√°sicos desde nuevas perspectivas.

## üçï Conclusi√≥n: Ciencia de Datos para Saborear las Matem√°ticas

Usar una pizza para calcular œÄ no es solo un juego de palabras, es una demostraci√≥n poderosa de c√≥mo los datos (en este caso, im√°genes) pueden convertirse en conocimiento matem√°tico mediante algoritmos simples pero ingeniosos.

Este experimento combina visi√≥n computacional, simulaci√≥n de Monte Carlo y an√°lisis estad√≠stico en apenas unas l√≠neas de c√≥digo. Esa es la magia de la ciencia de datos: convertir lo cotidiano en una herramienta para explorar lo abstracto.

¬øY t√∫? ¬øQu√© otra imagen usar√≠as para calcular œÄ?

Un peque√±o Notebook de Python con estos c√°lculos y c√≥digo para los resultados se puede encontrar en: [Estimacion_Pi_MonteCarlo_Pizza_Updated.ipynb](https://github.com/sierraporta/prancing-pony/blob/main/Codes/Estimacion_Pi_MonteCarlo_Pizza_Updated.ipynb).
